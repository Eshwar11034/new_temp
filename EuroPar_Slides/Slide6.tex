% Slide 6 — Two-Queue Scheduler: Concept (enqueue-to-main, move-to-wait-on-check)
\begin{frame}{Two-Queue Scheduler — Concept}
\small
\begin{columns}[T,onlytextwidth]
  \column{0.38\textwidth}
  \begin{block}{Queues (by design)}
    \begin{tightitem}
      \item \textbf{Main queue (ready-first policy):} all newly spawned tasks are enqueued here.
      \item \textbf{Wait queue:} holds tasks that were \emph{dequeued} from main but failed the readiness check
            (e.g., missing $T_{i-1,j}$).
      \item Workers pop from \emph{main}; after executing a task, each child is enqueued to \emph{main}.
      \item A promotion step scans \emph{wait} and moves newly-ready tasks back to \emph{main}. No global barriers.
    \end{tightitem}
  \end{block}

  \column{0.60\textwidth}
  \centering
  \begin{tikzpicture}[x=0.45cm,y=0.45cm,>=Stealth, every node/.style={transform shape,font=\scriptsize}]
    \tikzset{queue/.style={draw,rounded corners=0pt}}
    \tikzset{slot/.style ={draw,gray!70}}
    \tikzset{qlabel/.style={draw,white,fill=white,inner sep=2pt}}
    \tikzset{anno/.style ={align=left}}

    % Top (Main)
    \draw[queue,gray!70] (0,10) -- (18,10);
    \draw[queue,gray!70] (0,8.7) -- (18,8.7);
    \foreach \x in {5,9.5,14}{ \draw[slot] (\x,8.7) -- (\x,10); }
    \node[qlabel,anchor=east] at (17.5,9.35) {Main Queue};

    % Arrow: tasks enter main
    \draw[-{Stealth},thick] (-6,9.35) -- (-0.2,9.35);
    \node[anno,anchor=west] at (-6,10.0) {Tasks are\\enqueued into\\the main queue};

    % Middle arrows (check may send to wait; promotion returns to main)
    \draw[-{Stealth},gray!70,thick] (8.8,8.3) -- (8.8,5.0);  % to wait on failed check
    \draw[-{Stealth},gray!70,thick] (13.6,5.0) -- (13.6,8.3); % promotion back

    % Bottom (Wait)
    \draw[queue,gray!70] (0,3.7) -- (18,3.7);
    \draw[queue,gray!70] (0,2.4) -- (18,2.4);
    \foreach \x in {5,9.5,14}{ \draw[slot] (\x,2.4) -- (\x,3.7); }
    \node[qlabel,anchor=east] at (17.5,3.05) {Wait Queue};
  \end{tikzpicture}
\end{columns}
\end{frame}
